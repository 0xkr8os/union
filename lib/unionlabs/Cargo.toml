[package]
name = "unionlabs"
version = "0.1.0"
edition = "2021"

[dependencies]
serde-utils.workspace = true
contracts = { workspace = true, optional = true }
protos = { workspace = true, default-features = false, features = ["proto_full", "serde"] }

ssz = { workspace = true, default-features = false }
ssz_types = { workspace = true, default-features = false }
tree_hash = { workspace = true, default-features = false }
milagro_bls = { workspace = true, default-features = false }

cosmwasm-std = { version = "1.3", default-features = false }
prost = { version = "0.11.9", default-features = false, features = ["std"] }
bip32 = { version = "0.5.0", default-features = false, features = ["secp256k1"] }
# needs to be brought in explicitly since bip32 doesn't expose k256/schnorr
k256 = { version = "0.13.1", default-features = false, features = ["schnorr"] }
subtle-encoding = { version = "0.5.1", default-features = false, features = ["bech32-preview"] }
ripemd = { version = "0.1.3", default-features = false }
rs_merkle = "1.4.1"
sha2.workspace = true
serde = { version = "1.0.164", default-features = false, features = ["derive"] }
primitive-types = { version = "0.12.1", default-features = false, features = ["serde_no_std"] }
hex = { version = "0.4.3", default-features = false }
typenum = { version = "1.16.0", default-features = false, features = ["const-generics", "no_std"] }
hex-literal = "0.4.1"
generic-array = "0.14.7"
tracing = "0.1.37"
chrono = { version = "0.4.26", default-features = false, features = ["alloc"] }
uint = "*"

arbitrary = { version = "1.3.0", optional = true, features = ["derive"] }

ethers-core = { workspace = true, optional = true }
ethers-contract-derive = { workspace = true, optional = true }

serde_json = { version = "1.0.96", optional = true }
bitvec = "1.0.1"

derive_more = { workspace = true, features = ["display"] }

wasmparser = { version = "0.113" }

paste = { version = "1.0" }
clap = { version = "4.4.6", default-features = false, features = ["derive", "std"] }
either = "1.9.0"
thiserror = "1.0.49"
rlp = { version = "0.5.2", features = ["derive"] }
enumorph = "0.1.2"

[dev-dependencies]
rand = "0.8.5"
serde_json = "1.0.96"

[features]
default = ["ethabi", "std"]

grpc = ["protos/client"]
std = ["tree_hash/detect-cpufeatures"]
ethabi = ["contracts", "ethers-core", "ethers-contract-derive"]

fuzzing = ["arbitrary", "serde_json"]
