pub mod batch_header;
pub mod chunk;

#[cfg(test)]
mod tests {
    use core::str::FromStr;

    use ethers_core::abi::AbiDecode;
    use hex_literal::hex;

    use crate::{
        hash::H256,
        scroll::codec::{
            batch_header::{BatchHeader, BatchHeaderV0, BatchHeaderV1},
            chunk::{BlockContext, ChunkV0, ChunkV1},
        },
        uint::U256,
    };

    const COMMIT_BATCH_V0_CALLDATA: &str = include_str!("codec/commit-batch-v0-calldata.hex");
    const COMMIT_BATCH_V1_CALLDATA: &str = include_str!("codec/commit-batch-v1-calldata.hex");

    #[derive(::ethers_contract_derive::EthCall, ::ethers_contract_derive::EthDisplay, Debug)]
    #[ethcall(name = "commitBatch", abi = "commitBatch(uint8,bytes,bytes[],bytes)")]
    pub struct CommitBatchCall {
        version: u8,
        calldata: ethers_core::types::Bytes,
        chunks: Vec<ethers_core::types::Bytes>,
        skipped_l1_message_bitmap: ethers_core::types::Bytes,
    }

    #[test]
    #[allow(clippy::too_many_lines)]
    fn v0() {
        let call =
            CommitBatchCall::decode(hex::decode(COMMIT_BATCH_V0_CALLDATA.trim()).unwrap()).unwrap();

        let batch_header = dbg!(BatchHeader::decode(call.calldata).unwrap());

        assert_eq!(
            batch_header,
            BatchHeader::V0(BatchHeaderV0 {
                batch_index: 92804,
                l1_message_popped: 0,
                total_l1_message_popped: 188_679,
                data_hash: H256(hex!(
                    "ec724ccba7a0daaa9efd2b7d9be5d388dc7cf220f5c4dad378ff56ce42eafa88"
                )),
                parent_batch_hash: H256(hex!(
                    "ff1781fc986391cb3652ab0e359157b3731c6f949ee409132613e591a16fafa9"
                )),
                skipped_l1_message_bitmap: vec![
                    U256::from_str("2275547458792287193777408600122516695638451269261283130056922")
                        .unwrap(),
                    U256::from_str(
                        "77174093409721884524457275806490618888111675448293074024730629867355168596881"
                    )
                    .unwrap(),
                    U256::from_str("1275583646469913777191664618454566154772417611647380643360681")
                        .unwrap(),
                ],
            })
        );

        let blocks = call
            .chunks
            .iter()
            .map(ChunkV0::decode)
            .map(|cc| cc.unwrap().blocks)
            .collect::<Vec<_>>();

        assert_eq!(
            blocks,
            vec![
                vec![BlockContext {
                    block_number: 3_661_003,
                    timestamp: 1_708_991_382,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 19,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_004,
                    timestamp: 1_708_991_385,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 12,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_005,
                    timestamp: 1_708_991_388,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 15,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_006,
                    timestamp: 1_708_991_391,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 13,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_007,
                    timestamp: 1_708_991_394,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 19,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_008,
                    timestamp: 1_708_991_397,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 14,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_009,
                    timestamp: 1_708_991_400,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 14,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_010,
                    timestamp: 1_708_991_403,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 17,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_011,
                    timestamp: 1_708_991_407,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 30,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_012,
                    timestamp: 1_708_991_410,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 29,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_013,
                    timestamp: 1_708_991_414,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 23,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_014,
                    timestamp: 1_708_991_418,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 22,
                    num_l1_messages: 0,
                },],
                vec![
                    BlockContext {
                        block_number: 3_661_015,
                        timestamp: 1_708_991_421,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 18,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_661_016,
                        timestamp: 1_708_991_424,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 5,
                        num_l1_messages: 0,
                    },
                ],
                vec![BlockContext {
                    block_number: 3_661_017,
                    timestamp: 1_708_991_427,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 8,
                    num_l1_messages: 0,
                },],
                vec![BlockContext {
                    block_number: 3_661_018,
                    timestamp: 1_708_991_430,
                    base_fee: U256::from(0),
                    gas_limit: 10_000_000,
                    num_transactions: 16,
                    num_l1_messages: 0,
                },],
            ]
        );
    }

    #[test]
    #[allow(clippy::too_many_lines)]
    fn v1() {
        let call =
            CommitBatchCall::decode(hex::decode(COMMIT_BATCH_V1_CALLDATA.trim()).unwrap()).unwrap();

        let batch_header = dbg!(BatchHeader::decode(call.calldata).unwrap());

        assert_eq!(
            batch_header,
            BatchHeader::V1(BatchHeaderV1 {
                batch_index: 69816,
                l1_message_popped: 0,
                total_l1_message_popped: 1_040_323,
                data_hash: H256(hex!(
                    "935a84eab955748b6787a63e19f864a5b4467f0555cad0044b6fb953e71c24cc"
                )),
                blob_versioned_hash: H256(hex!(
                    "016f0b5c29078645ab0e478660945af52b8e087a5d4f7bda353cdd66930a96d0"
                )),
                parent_batch_hash: H256(hex!(
                    "f950be96f899b53ec4591c9e23f36275bcfde54843b1b9ce1d1e72f68ec9df71"
                )),
                skipped_l1_message_bitmap: vec![
                    U256::from_str(
                        "452312848583268100256663057676531702393532638015933944656593936124623803764"
                    )
                    .unwrap(),
                    U256::from_str(
                        "63054407418394210682298655575540436913176309538420961057281238967820887852934"
                    )
                    .unwrap(),
                    U256::from_str(
                        "31511815953079130544450193154443351232198220297735285541548977705385534724533"
                    )
                    .unwrap(),
                    U256::from_str("393994748823741938745730466313287771067841369961800586092401")
                        .unwrap(),
                ],
            })
        );

        let blocks = dbg!(call
            .chunks
            .iter()
            .map(ChunkV1::decode)
            .map(|cc| cc.unwrap().blocks)
            .collect::<Vec<_>>());

        assert_eq!(
            blocks,
            vec![
                vec![
                    BlockContext {
                        block_number: 3_819_787,
                        timestamp: 1_713_395_850,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_788,
                        timestamp: 1_713_395_853,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_789,
                        timestamp: 1_713_395_856,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_790,
                        timestamp: 1_713_395_859,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 3,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_791,
                        timestamp: 1_713_395_862,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 11,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_792,
                        timestamp: 1_713_395_865,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 9,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_793,
                        timestamp: 1_713_395_868,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 10,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_794,
                        timestamp: 1_713_395_871,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_795,
                        timestamp: 1_713_395_874,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_796,
                        timestamp: 1_713_395_878,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_797,
                        timestamp: 1_713_395_881,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_798,
                        timestamp: 1_713_395_884,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_799,
                        timestamp: 1_713_395_887,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_800,
                        timestamp: 1_713_395_890,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_801,
                        timestamp: 1_713_395_893,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_802,
                        timestamp: 1_713_395_896,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_803,
                        timestamp: 1_713_395_899,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_804,
                        timestamp: 1_713_395_902,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_805,
                        timestamp: 1_713_395_905,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_806,
                        timestamp: 1_713_395_908,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_807,
                        timestamp: 1_713_395_911,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_808,
                        timestamp: 1_713_395_914,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_809,
                        timestamp: 1_713_395_917,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_810,
                        timestamp: 1_713_395_920,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_811,
                        timestamp: 1_713_395_923,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_812,
                        timestamp: 1_713_395_926,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_813,
                        timestamp: 1_713_395_929,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_814,
                        timestamp: 1_713_395_932,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_815,
                        timestamp: 1_713_395_935,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_816,
                        timestamp: 1_713_395_938,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_817,
                        timestamp: 1_713_395_941,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_818,
                        timestamp: 1_713_395_944,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_819,
                        timestamp: 1_713_395_947,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_820,
                        timestamp: 1_713_395_950,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_821,
                        timestamp: 1_713_395_953,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_822,
                        timestamp: 1_713_395_956,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_823,
                        timestamp: 1_713_395_959,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_824,
                        timestamp: 1_713_395_962,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_825,
                        timestamp: 1_713_395_965,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_826,
                        timestamp: 1_713_395_968,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_827,
                        timestamp: 1_713_395_971,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 3,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_828,
                        timestamp: 1_713_395_974,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_829,
                        timestamp: 1_713_395_977,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_830,
                        timestamp: 1_713_395_980,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_831,
                        timestamp: 1_713_395_983,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_832,
                        timestamp: 1_713_395_986,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_833,
                        timestamp: 1_713_395_989,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_834,
                        timestamp: 1_713_395_992,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_835,
                        timestamp: 1_713_395_995,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_836,
                        timestamp: 1_713_395_998,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_837,
                        timestamp: 1_713_396_002,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_838,
                        timestamp: 1_713_396_005,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_839,
                        timestamp: 1_713_396_008,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_840,
                        timestamp: 1_713_396_011,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                ],
                vec![
                    BlockContext {
                        block_number: 3_819_841,
                        timestamp: 1_713_396_014,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_842,
                        timestamp: 1_713_396_017,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_843,
                        timestamp: 1_713_396_020,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_844,
                        timestamp: 1_713_396_023,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_845,
                        timestamp: 1_713_396_026,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_846,
                        timestamp: 1_713_396_029,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_847,
                        timestamp: 1_713_396_032,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 3,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_848,
                        timestamp: 1_713_396_035,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_849,
                        timestamp: 1_713_396_038,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 3,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_850,
                        timestamp: 1_713_396_041,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_851,
                        timestamp: 1_713_396_044,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_852,
                        timestamp: 1_713_396_047,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_853,
                        timestamp: 1_713_396_050,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_854,
                        timestamp: 1_713_396_053,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_855,
                        timestamp: 1_713_396_056,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_856,
                        timestamp: 1_713_396_059,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_857,
                        timestamp: 1_713_396_062,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_858,
                        timestamp: 1_713_396_065,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_859,
                        timestamp: 1_713_396_068,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_860,
                        timestamp: 1_713_396_071,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_861,
                        timestamp: 1_713_396_074,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_862,
                        timestamp: 1_713_396_077,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_863,
                        timestamp: 1_713_396_080,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_864,
                        timestamp: 1_713_396_083,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_865,
                        timestamp: 1_713_396_086,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_866,
                        timestamp: 1_713_396_089,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_867,
                        timestamp: 1_713_396_092,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_868,
                        timestamp: 1_713_396_095,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_869,
                        timestamp: 1_713_396_098,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_870,
                        timestamp: 1_713_396_101,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_871,
                        timestamp: 1_713_396_104,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_872,
                        timestamp: 1_713_396_107,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_873,
                        timestamp: 1_713_396_110,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_874,
                        timestamp: 1_713_396_113,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_875,
                        timestamp: 1_713_396_117,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_876,
                        timestamp: 1_713_396_120,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_877,
                        timestamp: 1_713_396_123,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_878,
                        timestamp: 1_713_396_126,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_879,
                        timestamp: 1_713_396_129,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_880,
                        timestamp: 1_713_396_132,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_881,
                        timestamp: 1_713_396_135,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_882,
                        timestamp: 1_713_396_138,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_883,
                        timestamp: 1_713_396_141,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_884,
                        timestamp: 1_713_396_144,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_885,
                        timestamp: 1_713_396_147,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 3,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_886,
                        timestamp: 1_713_396_150,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_887,
                        timestamp: 1_713_396_153,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_888,
                        timestamp: 1_713_396_156,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_889,
                        timestamp: 1_713_396_159,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_890,
                        timestamp: 1_713_396_162,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_891,
                        timestamp: 1_713_396_165,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_892,
                        timestamp: 1_713_396_168,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_893,
                        timestamp: 1_713_396_171,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_894,
                        timestamp: 1_713_396_174,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_895,
                        timestamp: 1_713_396_177,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_896,
                        timestamp: 1_713_396_180,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_897,
                        timestamp: 1_713_396_183,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_898,
                        timestamp: 1_713_396_186,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_899,
                        timestamp: 1_713_396_189,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_900,
                        timestamp: 1_713_396_192,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_901,
                        timestamp: 1_713_396_195,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_902,
                        timestamp: 1_713_396_198,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 1,
                    },
                    BlockContext {
                        block_number: 3_819_903,
                        timestamp: 1_713_396_201,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_904,
                        timestamp: 1_713_396_204,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_905,
                        timestamp: 1_713_396_207,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_906,
                        timestamp: 1_713_396_210,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_907,
                        timestamp: 1_713_396_213,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_908,
                        timestamp: 1_713_396_216,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_909,
                        timestamp: 1_713_396_219,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_910,
                        timestamp: 1_713_396_222,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 2,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_911,
                        timestamp: 1_713_396_225,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_912,
                        timestamp: 1_713_396_228,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_913,
                        timestamp: 1_713_396_231,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_914,
                        timestamp: 1_713_396_234,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                    BlockContext {
                        block_number: 3_819_915,
                        timestamp: 1_713_396_237,
                        base_fee: U256::from(0),
                        gas_limit: 10_000_000,
                        num_transactions: 1,
                        num_l1_messages: 0,
                    },
                ]
            ]
        );
    }
}
